<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– æ™‚é˜å­¸ç¿’å¤§æŒ‘æˆ°02 - è¶…èƒ½åŠ›éœ¸ç‹æ”¶é›†ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
            background: linear-gradient(135deg, #2d3436 0%, #636e72 50%, #74b9ff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: white;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            max-width: 1000px;
            width: 100%;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            text-align: center;
            color: #2d3436;
            border: 3px solid #ffeaa7;
        }
        
        h1 {
            color: #2d3436;
            margin-bottom: 20px;
            font-size: 2.8em;
            text-shadow: 2px 2px 4px rgba(255, 234, 167, 0.3);
            background: linear-gradient(45deg, #e17055, #fd79a8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .score-board {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 15px;
            color: white;
            border: 2px solid #ffeaa7;
        }
        
        .score-item {
            font-size: 1.3em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .clocks-container {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .clock-section {
            flex: 1;
            min-width: 250px;
        }
        
        .clock-label {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            padding: 10px;
            background: linear-gradient(135deg, #e17055, #fd79a8);
            color: white;
            border-radius: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .clock-canvas {
            border: 4px solid #ffeaa7;
            border-radius: 50%;
            background: white;
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            margin: 0 auto;
            display: block;
        }
        
        .time-display {
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            border: 2px solid #ffeaa7;
        }
        
        .question-section {
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            border-radius: 20px;
            color: white;
            border: 3px solid #ffeaa7;
        }
        
        .question-section h3 {
            font-size: 1.8em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .time-inputs {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .time-input {
            padding: 12px 18px;
            border: 3px solid #ffeaa7;
            border-radius: 15px;
            font-size: 1.6em;
            width: 120px;
            text-align: center;
            font-weight: bold;
            background: white;
            color: #2d3436;
        }
        
        .time-input:focus {
            outline: none;
            border-color: #e17055;
            box-shadow: 0 0 15px rgba(225, 112, 85, 0.5);
            transform: scale(1.05);
        }
        
        .time-label {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-size: 1.4em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 25px 15px;
            border: 3px solid #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 184, 148, 0.4);
        }
        
        .next-btn {
            background: linear-gradient(135deg, #e17055, #fd79a8);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-size: 1.4em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 25px 15px;
            border: 3px solid #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .next-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(225, 112, 85, 0.4);
        }
        
        .feedback {
            margin: 25px 0;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.4em;
            font-weight: bold;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid;
        }
        
        .correct {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border-color: #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .incorrect {
            background: linear-gradient(135deg, #e17055, #fd79a8);
            color: white;
            border-color: #ffeaa7;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .ultraman-reward {
            margin: 25px 0;
            animation: heroAppear 0.8s ease;
        }
        
        .ultraman-character {
            font-size: 5em;
            margin: 15px;
            animation: heroPower 2s infinite;
            text-shadow: 0 0 20px rgba(255, 234, 167, 0.8);
        }
        
        .collected-ultramen {
            margin: 25px 0;
            padding: 25px;
            background: linear-gradient(135deg, #2d3436, #636e72);
            border-radius: 20px;
            color: white;
            border: 3px solid #ffeaa7;
        }
        
        .collected-ultramen h3 {
            color: #ffeaa7;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .ultraman-collection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            max-height: 250px;
            overflow-y: auto;
        }
        
        .ultraman-badge {
            font-size: 2.5em;
            padding: 15px;
            background: linear-gradient(135deg, #e17055, #fd79a8);
            border-radius: 50%;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            animation: ultramanGlow 0.8s ease;
            transition: transform 0.3s ease;
            border: 3px solid #ffeaa7;
            text-shadow: 0 0 15px rgba(255, 234, 167, 0.8);
        }
        
        .ultraman-badge:hover {
            transform: scale(1.2) rotate(10deg);
        }
        
        .progress-bar {
            margin: 20px 0;
            background: #636e72;
            border-radius: 15px;
            height: 25px;
            overflow: hidden;
            border: 2px solid #ffeaa7;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894, #00cec9, #74b9ff);
            transition: width 0.8s ease;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 184, 148, 0.5);
        }
        
        .final-screen {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #2d3436, #636e72);
            border-radius: 20px;
            color: white;
            border: 3px solid #ffeaa7;
        }
        
        .restart-btn {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            color: #2d3436;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-size: 1.4em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 25px;
            border: 3px solid #e17055;
        }
        
        .restart-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(255, 234, 167, 0.4);
        }
        
        /* è¶…èƒ½åŠ›éœ¸ç‹ä¸»é¡Œå‹•ç•« */
        @keyframes heroAppear {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }
        
        @keyframes heroPower {
            0%, 100% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.1); filter: brightness(1.5); }
        }
        
        @keyframes ultramanGlow {
            0% { 
                opacity: 0; 
                transform: scale(0.5); 
                box-shadow: 0 0 0 rgba(255, 234, 167, 0); 
            }
            50% { 
                opacity: 0.8; 
                transform: scale(1.2); 
                box-shadow: 0 0 30px rgba(255, 234, 167, 0.8); 
            }
            100% { 
                opacity: 1; 
                transform: scale(1); 
                box-shadow: 0 8px 16px rgba(0,0,0,0.3); 
            }
        }
        
        .hidden {
            display: none;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .clocks-container {
                flex-direction: column;
            }
            
            .score-board {
                flex-direction: column;
                gap: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .time-inputs {
                flex-direction: column;
            }
        }
        
        /* ç‰¹æ®Šå¥§ç‰¹æ›¼æ•ˆæœ */
        .special-effect {
            position: absolute;
            pointer-events: none;
            font-size: 3em;
            animation: specialBlast 1.5s ease-out forwards;
            z-index: 1000;
        }
        
        @keyframes specialBlast {
            0% { 
                transform: scale(0) rotate(0deg); 
                opacity: 1; 
            }
            50% { 
                transform: scale(2) rotate(180deg); 
                opacity: 0.8; 
            }
            100% { 
                transform: scale(4) rotate(360deg); 
                opacity: 0; 
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ¤– æ™‚é˜å­¸ç¿’å¤§æŒ‘æˆ°02 - è¶…èƒ½åŠ›éœ¸ç‹æ”¶é›†ç‰ˆ</h1>
        
        <div class="score-board">
            <div class="score-item">é¡Œç›®: <span id="currentQuestion">1</span>/20</div>
            <div class="score-item">ç­”å°: <span id="correctCount">0</span></div>
            <div class="score-item">è¶…èƒ½åŠ›éœ¸ç‹æ”¶é›†: <span id="ultramanCount">0</span></div>
        </div>
        
        <div id="gameScreen">
            <div class="clocks-container">
                <div class="clock-section">
                    <div class="clock-label">ğŸ• æ™‚é–“A (é–‹å§‹æ™‚é–“)</div>
                    <canvas id="clockA" class="clock-canvas" width="250" height="250"></canvas>
                    <div id="timeDisplayA" class="time-display">ğŸ• è«‹ä»”ç´°è§€å¯Ÿæ™‚é˜</div>
                </div>
                
                <div class="clock-section">
                    <div class="clock-label">ğŸ•‘ æ™‚é–“B (çµæŸæ™‚é–“)</div>
                    <canvas id="clockB" class="clock-canvas" width="250" height="250"></canvas>
                    <div id="timeDisplayB" class="time-display">ğŸ•‘ è«‹ä»”ç´°è§€å¯Ÿæ™‚é˜</div>
                </div>
            </div>
            
            <div class="question-section">
                <h3>âš¡ æŒ‘æˆ°ä»»å‹™ï¼šä»”ç´°è§€å¯Ÿå…©å€‹æ™‚é˜ï¼Œè¨ˆç®—å¾æ™‚é–“Aåˆ°æ™‚é–“Béœ€è¦å¤šé•·æ™‚é–“ï¼Ÿ</h3>
                <p style="color: #ffeaa7; font-size: 1.1em; margin: 10px 0;">
                    ğŸ” æç¤ºï¼šå…ˆè®€å‡ºå…©å€‹æ™‚é˜çš„æ™‚é–“ï¼Œå†è¨ˆç®—æ™‚é–“å·®
                </p>
                <div class="time-inputs">
                    <div class="time-label">å°æ™‚</div>
                    <input type="text" id="hourInput" class="time-input" maxlength="2" placeholder="æ™‚">
                    <div class="time-label">åˆ†é˜</div>
                    <input type="text" id="minuteInput" class="time-input" maxlength="2" placeholder="åˆ†">
                </div>
                <button onclick="checkAnswer()" class="submit-btn">ğŸš€ æäº¤ç­”æ¡ˆ</button>
            </div>
            
            <div id="feedback" class="feedback"></div>
            
            <div id="ultramanReward" class="ultraman-reward hidden"></div>
            
            <button id="nextBtn" onclick="nextQuestion()" class="next-btn hidden">ä¸‹ä¸€é¡Œ âš¡</button>
        </div>
        
        <div id="finalScreen" class="final-screen hidden">
            <h2>ğŸ‰ æ­å–œå®Œæˆè¶…èƒ½åŠ›éœ¸ç‹æ™‚é˜æŒ‘æˆ°ï¼</h2>
            <p>ç¸½å…±ç­”å°äº† <span id="finalScore"></span> é¡Œ</p>
            <p>æ”¶é›†äº† <span id="finalUltramen"></span> ä½è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„ï¼</p>
            <div id="finalMessage" style="margin: 25px 0; font-size: 1.3em;"></div>
            <button onclick="restartGame()" class="restart-btn">ğŸ”„ é‡æ–°æŒ‘æˆ°</button>
        </div>
        
        <div class="collected-ultramen">
            <h3>ğŸ¤– è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„æ”¶é›†é€²åº¦ï¼š<span id="progressText">0/20</span></h3>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
            </div>
            <div id="ultramanCollection" class="ultraman-collection"></div>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let currentQuestion = 1;
        let correctCount = 0;
        let timeA = { hour: 0, minute: 0 };
        let timeB = { hour: 0, minute: 0 };
        let correctDifference = { hours: 0, minutes: 0 };
        let collectedUltramen = [];
        
        // è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„åˆ—è¡¨ - 20ä½ä¸åŒçš„è¶…èƒ½åŠ›éœ¸ç‹
        const ultramanHeroes = [
            'ğŸ¤–', 'ğŸ‘½', 'ğŸ›¸', 'âš¡', 'ğŸ”¥', 
            'âœ¨', 'ğŸ’«', 'ğŸŒŸ', 'ğŸ’¥', 'ğŸ”®', 
            'ğŸš€', 'ğŸ›¡ï¸', 'âš”ï¸', 'ğŸ¯', 'ğŸ’', 
            'ğŸŒˆ', 'â„ï¸', 'ğŸŒªï¸', 'ğŸŒŠ', 'âš›ï¸'
        ];
        
        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            generateNewTimes();
            drawClocks();
            showTimeTips();
            updateDisplay();
        }
        
        // ç”Ÿæˆæ–°çš„éš¨æ©Ÿæ™‚é–“
        function generateNewTimes() {
            // ç”Ÿæˆæ™‚é–“A
            timeA.hour = Math.floor(Math.random() * 12) + 1;
            timeA.minute = Math.floor(Math.random() * 12) * 5;
            
            // ç”Ÿæˆæ™‚é–“B (ç¢ºä¿Båœ¨Aä¹‹å¾Œ)
            let minMinutesLater = 15; // æœ€å°‘15åˆ†é˜å¾Œ
            let maxMinutesLater = 480; // æœ€å¤š8å°æ™‚å¾Œ
            let minutesLater = Math.floor(Math.random() * (maxMinutesLater - minMinutesLater + 1)) + minMinutesLater;
            
            let totalMinutesA = timeA.hour * 60 + timeA.minute;
            let totalMinutesB = totalMinutesA + minutesLater;
            
            // å¦‚æœè¶…é24å°æ™‚ï¼Œèª¿æ•´åˆ°ä¸‹ä¸€å¤©
            if (totalMinutesB >= 24 * 60) {
                totalMinutesB = totalMinutesB % (24 * 60);
            }
            
            timeB.hour = Math.floor(totalMinutesB / 60);
            if (timeB.hour === 0) timeB.hour = 12;
            if (timeB.hour > 12) timeB.hour = timeB.hour - 12;
            
            timeB.minute = totalMinutesB % 60;
            
            // è¨ˆç®—æ­£ç¢ºçš„æ™‚é–“å·®
            calculateTimeDifference();
        }
        
        // è¨ˆç®—æ™‚é–“å·®
        function calculateTimeDifference() {
            let totalMinutesA = timeA.hour * 60 + timeA.minute;
            let totalMinutesB = timeB.hour * 60 + timeB.minute;
            
            // å¦‚æœBå°æ–¼Aï¼Œè¡¨ç¤ºè·¨è¶Šäº†12å°æ™‚
            if (totalMinutesB < totalMinutesA) {
                totalMinutesB += 12 * 60;
            }
            
            let diffMinutes = totalMinutesB - totalMinutesA;
            correctDifference.hours = Math.floor(diffMinutes / 60);
            correctDifference.minutes = diffMinutes % 60;
        }
        
        // é¡¯ç¤ºæç¤ºæ–‡å­—ï¼ˆä¸é¡¯ç¤ºå…·é«”æ™‚é–“ï¼‰
        function showTimeTips() {
            const displayA = document.getElementById('timeDisplayA');
            const displayB = document.getElementById('timeDisplayB');
            
            displayA.textContent = 'ğŸ• è«‹ä»”ç´°è§€å¯Ÿæ™‚é˜A';
            displayB.textContent = 'ğŸ•‘ è«‹ä»”ç´°è§€å¯Ÿæ™‚é˜B';
        }
        
        // ç¹ªè£½æ™‚é˜
        function drawClock(canvasId, time) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 100;
            
            // æ¸…é™¤ç•«å¸ƒ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç¹ªè£½æ™‚é˜å¤–åœ“
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#2d3436';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // ç¹ªè£½æ™‚é˜æ•¸å­—
            ctx.font = 'bold 18px Arial';
            ctx.fillStyle = '#2d3436';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            for (let i = 1; i <= 12; i++) {
                const angle = (i - 3) * Math.PI / 6;
                const x = centerX + Math.cos(angle) * (radius - 25);
                const y = centerY + Math.sin(angle) * (radius - 25);
                ctx.fillText(i.toString(), x, y);
            }
            
            // ç¹ªè£½æ™‚é˜åˆ»åº¦
            for (let i = 0; i < 60; i++) {
                const angle = i * Math.PI / 30;
                const isHour = i % 5 === 0;
                const tickLength = isHour ? 15 : 8;
                const tickWidth = isHour ? 2 : 1;
                
                const startX = centerX + Math.cos(angle) * (radius - tickLength);
                const startY = centerY + Math.sin(angle) * (radius - tickLength);
                const endX = centerX + Math.cos(angle) * radius;
                const endY = centerY + Math.sin(angle) * radius;
                
                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.strokeStyle = '#2d3436';
                ctx.lineWidth = tickWidth;
                ctx.stroke();
            }
            
            // ç¹ªè£½åˆ†é‡
            const minuteAngle = (time.minute - 15) * Math.PI / 30;
            const minuteLength = radius - 30;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(minuteAngle) * minuteLength,
                centerY + Math.sin(minuteAngle) * minuteLength
            );
            ctx.strokeStyle = '#74b9ff';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // ç¹ªè£½æ™‚é‡
            const hourAngle = ((time.hour + time.minute / 60) - 3) * Math.PI / 6;
            const hourLength = radius - 50;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(
                centerX + Math.cos(hourAngle) * hourLength,
                centerY + Math.sin(hourAngle) * hourLength
            );
            ctx.strokeStyle = '#e17055';
            ctx.lineWidth = 4;
            ctx.stroke();
            
            // ç¹ªè£½ä¸­å¿ƒåœ“é»
            ctx.beginPath();
            ctx.arc(centerX, centerY, 8, 0, 2 * Math.PI);
            ctx.fillStyle = '#2d3436';
            ctx.fill();
        }
        
        // ç¹ªè£½å…©å€‹æ™‚é˜
        function drawClocks() {
            drawClock('clockA', timeA);
            drawClock('clockB', timeB);
        }
        
        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const hourInputValue = document.getElementById('hourInput').value.trim();
            const minuteInputValue = document.getElementById('minuteInput').value.trim();
            const feedback = document.getElementById('feedback');
            const ultramanReward = document.getElementById('ultramanReward');
            const nextBtn = document.getElementById('nextBtn');
            
            if (!hourInputValue || !minuteInputValue) {
                feedback.textContent = 'âš ï¸ è«‹è¼¸å…¥å®Œæ•´çš„æ™‚é–“å·®ï¼';
                feedback.className = 'feedback incorrect';
                return;
            }
            
            const hourInput = parseInt(hourInputValue);
            const minuteInput = parseInt(minuteInputValue);
            
            if (isNaN(hourInput) || isNaN(minuteInput) || 
                hourInput < 0 || hourInput > 12 || 
                minuteInput < 0 || minuteInput > 59) {
                feedback.textContent = 'âš ï¸ è«‹è¼¸å…¥æœ‰æ•ˆçš„æ™‚é–“æ ¼å¼ï¼ï¼ˆæ™‚ï¼š0-12ï¼Œåˆ†ï¼š0-59ï¼‰';
                feedback.className = 'feedback incorrect';
                return;
            }
            
            if (hourInput === correctDifference.hours && minuteInput === correctDifference.minutes) {
                correctCount++;
                feedback.textContent = 'ğŸ‰ æ­£ç¢ºï¼å¤ªæ£’äº†ï¼';
                feedback.className = 'feedback correct';
                
                // ç²å¾—è¶…èƒ½åŠ›éœ¸ç‹çå‹µ
                const ultramanIndex = collectedUltramen.length % ultramanHeroes.length;
                const newUltraman = ultramanHeroes[ultramanIndex];
                collectedUltramen.push(newUltraman);
                
                let rewardMessage = `
                    <div class="ultraman-character">${newUltraman}</div>
                    <p style="color: #ffeaa7; font-weight: bold; font-size: 1.3em;">ç²å¾—æ–°çš„è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„ï¼</p>
                `;
                
                // é‡Œç¨‹ç¢‘æ…¶ç¥
                const ultramanCount = collectedUltramen.length;
                if (ultramanCount === 5) {
                    rewardMessage += '<p style="color: #00b894; font-weight: bold;">âš¡ å¤ªæ£’äº†ï¼æ”¶é›†äº†5ä½è‹±é›„ï¼</p>';
                    createSpecialEffect('âš¡');
                } else if (ultramanCount === 10) {
                    rewardMessage += '<p style="color: #74b9ff; font-weight: bold;">ğŸŒŸ å“‡ï¼è‹±é›„åœ˜éšŠä¸€åŠé›†çµï¼</p>';
                    createSpecialEffect('ğŸŒŸ');
                } else if (ultramanCount === 15) {
                    rewardMessage += '<p style="color: #e17055; font-weight: bold;">ğŸ”¥ å¿«è¦æˆåŠŸäº†ï¼åªå·®5ä½è‹±é›„ï¼</p>';
                    createSpecialEffect('ğŸ”¥');
                } else if (ultramanCount === 20) {
                    rewardMessage += '<p style="color: #ffeaa7; font-weight: bold;">ğŸŠ æ­å–œï¼è¶…èƒ½åŠ›éœ¸ç‹å…¨å“¡é›†çµï¼</p>';
                    createSpecialEffect('ğŸ’¥');
                }
                
                ultramanReward.innerHTML = rewardMessage;
                ultramanReward.classList.remove('hidden');
                
                updateUltramanCollection();
            } else {
                // é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆå’Œå…·é«”æ™‚é–“
                const hourStrA = timeA.hour.toString().padStart(2, '0');
                const minuteStrA = timeA.minute.toString().padStart(2, '0');
                const hourStrB = timeB.hour.toString().padStart(2, '0');
                const minuteStrB = timeB.minute.toString().padStart(2, '0');
                
                feedback.textContent = `âŒ ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ ${correctDifference.hours} å°æ™‚ ${correctDifference.minutes} åˆ†é˜`;
                feedback.className = 'feedback incorrect';
                
                // æš«æ™‚é¡¯ç¤ºæ­£ç¢ºæ™‚é–“å¹«åŠ©å­¸ç¿’
                const displayA = document.getElementById('timeDisplayA');
                const displayB = document.getElementById('timeDisplayB');
                displayA.textContent = `æ™‚é–“Aï¼š${hourStrA}:${minuteStrA}`;
                displayB.textContent = `æ™‚é–“Bï¼š${hourStrB}:${minuteStrB}`;
                
                ultramanReward.classList.add('hidden');
            }
            
            nextBtn.classList.remove('hidden');
            updateDisplay();
        }
        
        // å‰µå»ºç‰¹æ®Šæ•ˆæœ
        function createSpecialEffect(emoji) {
            const effect = document.createElement('div');
            effect.className = 'special-effect';
            effect.textContent = emoji;
            effect.style.left = Math.random() * window.innerWidth + 'px';
            effect.style.top = Math.random() * window.innerHeight + 'px';
            document.body.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 1500);
        }
        
        // ä¸‹ä¸€é¡Œ
        function nextQuestion() {
            if (currentQuestion >= 20) {
                showFinalScreen();
                return;
            }
            
            currentQuestion++;
            generateNewTimes();
            drawClocks();
            showTimeTips();
            
            // é‡ç½®è¼¸å…¥å’Œåé¥‹
            document.getElementById('hourInput').value = '';
            document.getElementById('minuteInput').value = '';
            document.getElementById('feedback').textContent = '';
            document.getElementById('feedback').className = 'feedback';
            document.getElementById('ultramanReward').classList.add('hidden');
            document.getElementById('nextBtn').classList.add('hidden');
            
            updateDisplay();
        }
        
        // æ›´æ–°é¡¯ç¤º
        function updateDisplay() {
            document.getElementById('currentQuestion').textContent = currentQuestion;
            document.getElementById('correctCount').textContent = correctCount;
            document.getElementById('ultramanCount').textContent = collectedUltramen.length;
        }
        
        // æ›´æ–°è¶…èƒ½åŠ›éœ¸ç‹æ”¶é›†é¡¯ç¤º
        function updateUltramanCollection() {
            const collection = document.getElementById('ultramanCollection');
            const progressText = document.getElementById('progressText');
            const progressFill = document.getElementById('progressFill');
            
            collection.innerHTML = collectedUltramen.map(ultraman => 
                `<div class="ultraman-badge">${ultraman}</div>`
            ).join('');
            
            // æ›´æ–°é€²åº¦æ¢
            const progress = (collectedUltramen.length / 20) * 100;
            progressText.textContent = `${collectedUltramen.length}/20`;
            progressFill.style.width = `${progress}%`;
            
            // å¦‚æœæ”¶é›†æ»¿äº†ï¼Œæ·»åŠ ç‰¹æ®Šæ•ˆæœ
            if (collectedUltramen.length === 20) {
                progressFill.style.background = 'linear-gradient(90deg, #ffeaa7, #fdcb6e, #e17055)';
                progressText.style.color = '#ffeaa7';
                progressText.style.fontWeight = 'bold';
                progressText.style.textShadow = '0 0 10px rgba(255, 234, 167, 0.8)';
            }
        }
        
        // é¡¯ç¤ºæœ€çµ‚çµæœ
        function showFinalScreen() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('finalScreen').classList.remove('hidden');
            document.getElementById('finalScore').textContent = correctCount;
            document.getElementById('finalUltramen').textContent = collectedUltramen.length;
            
            // æ ¹æ“šç­”å°é¡Œæ•¸é¡¯ç¤ºä¸åŒçš„é¼“å‹µæ¶ˆæ¯
            const finalMessage = document.getElementById('finalMessage');
            const percentage = (correctCount / 20) * 100;
            
            if (percentage === 100) {
                finalMessage.innerHTML = 'ğŸ† å¤ªæ£’äº†ï¼å…¨éƒ¨ç­”å°ï¼ä½ æ˜¯æ™‚é˜è¨ˆç®—å¤§å¸«ï¼<br>ğŸ¤– è¶…èƒ½åŠ›éœ¸ç‹å…¨å“¡é›†çµï¼Œå®‡å®™å’Œå¹³é ä½ äº†ï¼';
                finalMessage.style.color = '#ffeaa7';
            } else if (percentage >= 80) {
                finalMessage.innerHTML = 'âš¡ éå¸¸å„ªç§€ï¼ä½ å°æ™‚é–“è¨ˆç®—å¾ˆç†Ÿç·´ï¼<br>ğŸŒŸ è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„å€‘éƒ½å¾ˆä½©æœä½ ï¼';
                finalMessage.style.color = '#00b894';
            } else if (percentage >= 60) {
                finalMessage.innerHTML = 'ğŸš€ åšå¾—å¾ˆå¥½ï¼ç¹¼çºŒç·´ç¿’æœƒæ›´æ£’ï¼<br>ğŸ’« å·²ç¶“æ”¶é›†äº†å¾ˆå¤šè¶…èƒ½åŠ›éœ¸ç‹è‹±é›„ï¼';
                finalMessage.style.color = '#74b9ff';
            } else if (percentage >= 40) {
                finalMessage.innerHTML = 'ğŸ’ª ä¸éŒ¯çš„é–‹å§‹ï¼å¤šç·´ç¿’å°±æœƒé€²æ­¥ï¼<br>ğŸ”® è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„å€‘åœ¨ç­‰ä½ è®Šå¾—æ›´å¼·ï¼';
                finalMessage.style.color = '#a29bfe';
            } else {
                finalMessage.innerHTML = 'ğŸŒ± å­¸ç¿’æ˜¯å€‹éç¨‹ï¼Œå†è©¦ä¸€æ¬¡å§ï¼<br>ğŸ¤– è¶…èƒ½åŠ›éœ¸ç‹è‹±é›„å€‘æœƒé™ªä¼´ä½ ç·´ç¿’ï¼';
                finalMessage.style.color = '#fd79a8';
            }
        }
        
        // é‡æ–°é–‹å§‹éŠæˆ²
        function restartGame() {
            currentQuestion = 1;
            correctCount = 0;
            collectedUltramen = [];
            
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('finalScreen').classList.add('hidden');
            document.getElementById('ultramanCollection').innerHTML = '';
            
            // é‡ç½®é€²åº¦æ¢
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            progressFill.style.width = '0%';
            progressFill.style.background = 'linear-gradient(90deg, #00b894, #00cec9, #74b9ff)';
            progressText.style.color = '#ffeaa7';
            progressText.style.fontWeight = 'bold';
            progressText.style.textShadow = '1px 1px 2px rgba(0,0,0,0.5)';
            
            initGame();
        }
        
        // æŒ‰Enteréµæäº¤ç­”æ¡ˆ
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const nextBtn = document.getElementById('nextBtn');
                if (!nextBtn.classList.contains('hidden')) {
                    nextQuestion();
                } else {
                    checkAnswer();
                }
            }
        });
        
        // è‡ªå‹•æ ¼å¼åŒ–è¼¸å…¥
        function formatInput(inputId, maxValue) {
            const input = document.getElementById(inputId);
            input.addEventListener('input', function() {
                let value = this.value.replace(/\D/g, ''); // åªä¿ç•™æ•¸å­—
                if (value.length > 2) {
                    value = value.substring(0, 2);
                }
                if (parseInt(value) > maxValue) {
                    value = maxValue.toString();
                }
                this.value = value;
            });
        }
        
        // åˆå§‹åŒ–è¼¸å…¥æ ¼å¼åŒ–
        formatInput('hourInput', 12);
        formatInput('minuteInput', 59);
        
        // å•Ÿå‹•éŠæˆ²
        initGame();
    </script>
</body>
</html>