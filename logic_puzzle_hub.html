<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§© å°å°è¦å‰‡æ¢éšªå®¶ - éŠæˆ²é¸æ“‡ä¸­å¿ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: white;
        }

        .hub-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 40px;
            max-width: 1000px;
            width: 100%;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            text-align: center;
            color: #2d3436;
        }

        h1 {
            color: #2d3436;
            margin-bottom: 15px;
            font-size: 3em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.3em;
            color: #636e72;
            margin-bottom: 40px;
            font-weight: 500;
        }

        .levels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .level-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            padding: 30px 25px;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .level-card:hover {
            transform: translateY(-8px);
            border-color: #667eea;
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
        }

        .level-card.available {
            cursor: pointer;
        }

        .level-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .level-card.locked::before {
            content: 'ğŸ”’';
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            opacity: 0.7;
        }

        .level-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .level-emoji {
            font-size: 3em;
            animation: pulse 2s infinite;
        }

        .level-info h3 {
            font-size: 1.8em;
            color: #2d3436;
            margin-bottom: 5px;
        }

        .level-difficulty {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .difficulty-basic { background: linear-gradient(45deg, #00b894, #00cec9); }
        .difficulty-intermediate { background: linear-gradient(45deg, #fdcb6e, #e17055); }
        .difficulty-advanced { background: linear-gradient(45deg, #e17055, #d63031); }
        .difficulty-expert { background: linear-gradient(45deg, #a29bfe, #6c5ce7); }

        .level-description {
            color: #636e72;
            margin: 15px 0;
            line-height: 1.5;
            font-size: 1.1em;
        }

        .level-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin: 15px 0;
        }

        .feature-tag {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
        }

        .level-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.8em;
            color: #636e72;
            margin-top: 2px;
        }

        .play-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-top: 10px;
        }

        .play-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .play-button.locked {
            background: #b2bec3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .back-button {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(116, 185, 255, 0.4);
        }

        .progress-section {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            color: white;
        }

        .progress-section h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .overall-progress {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }

        .progress-item {
            text-align: center;
        }

        .progress-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .progress-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        /* å‹•ç•«æ•ˆæœ */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes unlock {
            0% { transform: scale(1) rotate(0deg); opacity: 0.6; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }

        .unlocking {
            animation: unlock 1s ease-in-out;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .hub-container {
                padding: 25px;
            }

            h1 {
                font-size: 2.2em;
            }

            .levels-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .level-card {
                padding: 25px 20px;
            }

            .level-header {
                flex-direction: column;
                gap: 10px;
            }

            .level-emoji {
                font-size: 2.5em;
            }

            .overall-progress {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="hub-container">
        <h1>ğŸ§© å°å°è¦å‰‡æ¢éšªå®¶</h1>
        <p class="subtitle">é¸æ“‡é©åˆçš„é›£åº¦ï¼Œé–‹å§‹ä½ çš„é‚è¼¯æ¨ç†å¤§å†’éšªï¼</p>

        <div class="levels-grid">
            <!-- Level 1 - åŸºç¤ -->
            <div class="level-card available" onclick="startLevel(1)">
                <div class="level-header">
                    <div class="level-emoji">ğŸ”</div>
                    <div class="level-info">
                        <h3>Level 1</h3>
                        <span class="level-difficulty difficulty-basic">åŸºç¤å…¥é–€</span>
                    </div>
                </div>
                <div class="level-description">
                    å­¸ç¿’è§€å¯ŸåŸºæœ¬çš„åœ–å½¢è¦å¾‹ï¼ŒåŒ…æ‹¬å½¢ç‹€ã€é¡è‰²å’Œæ•¸é‡çš„ç°¡å–®è®ŠåŒ–æ¨¡å¼ã€‚
                </div>
                <div class="level-features">
                    <span class="feature-tag">ğŸ”º åŸºæœ¬å½¢ç‹€</span>
                    <span class="feature-tag">ğŸ¨ é¡è‰²è¦å¾‹</span>
                    <span class="feature-tag">ğŸ“Š æ•¸é‡è®ŠåŒ–</span>
                </div>
                <div class="level-stats">
                    <div class="stat-item">
                    <div class="stat-number">12</div>
                        <div class="stat-label">é¡Œç›®æ•¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">â­</div>
                        <div class="stat-label">é›£åº¦</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">5-8</div>
                        <div class="stat-label">é©åˆå¹´é½¡</div>
                    </div>
                </div>
                <a href="logic_puzzle_level_1.html" class="play-button">ğŸš€ é–‹å§‹æ¢éšª</a>
            </div>

            <!-- Level 2 - ä¸­ç´š -->
            <div class="level-card available" onclick="startLevel(2)">
                <div class="level-header">
                    <div class="level-emoji">ğŸ§ </div>
                    <div class="level-info">
                        <h3>Level 2</h3>
                        <span class="level-difficulty difficulty-intermediate">ä¸­ç´šæŒ‘æˆ°</span>
                    </div>
                </div>
                <div class="level-description">
                    å­¸ç¿’å¤šç¶­åº¦è¦å¾‹åˆ†æï¼ŒåŒ…æ‹¬å¤§å°è®ŠåŒ–ã€æ—‹è½‰è§’åº¦å’Œè¤‡åˆæ¨¡å¼çš„è­˜åˆ¥ã€‚
                </div>
                <div class="level-features">
                    <span class="feature-tag">ğŸ“ å¤§å°è®ŠåŒ–</span>
                    <span class="feature-tag">ğŸ”„ æ—‹è½‰è¦å¾‹</span>
                    <span class="feature-tag">ğŸ¯ è¤‡åˆæ¨¡å¼</span>
                </div>
                <div class="level-stats">
                    <div class="stat-item">
                        <div class="stat-number">20</div>
                        <div class="stat-label">é¡Œç›®æ•¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">â­â­</div>
                        <div class="stat-label">é›£åº¦</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">8-12</div>
                        <div class="stat-label">é©åˆå¹´é½¡</div>
                    </div>
                </div>
                <a href="logic_puzzle_level_2.html" class="play-button locked">ğŸ”’ éœ€å®ŒæˆLevel 1</a>
            </div>

            <!-- Level 3 - é«˜ç´š -->
            <div class="level-card locked" onclick="startLevel(3)">
                <div class="level-header">
                    <div class="level-emoji">ğŸ¯</div>
                    <div class="level-info">
                        <h3>Level 3</h3>
                        <span class="level-difficulty difficulty-advanced">é«˜ç´šæ€ç¶­</span>
                    </div>
                </div>
                <div class="level-description">
                    æŒ‘æˆ°æŠ½è±¡é‚è¼¯æ¨ç†ï¼ŒåŒ…æ‹¬åºåˆ—é æ¸¬ã€å°ç¨±è¦å¾‹å’Œæ¢ä»¶åˆ¤æ–·ã€‚
                </div>
                <div class="level-features">
                    <span class="feature-tag">ğŸ”® æŠ½è±¡æ€ç¶­</span>
                    <span class="feature-tag">âš–ï¸ å°ç¨±é‚è¼¯</span>
                    <span class="feature-tag">ğŸ§© åºåˆ—é æ¸¬</span>
                </div>
                <div class="level-stats">
                    <div class="stat-item">
                        <div class="stat-number">15</div>
                        <div class="stat-label">é¡Œç›®æ•¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">â­â­â­</div>
                        <div class="stat-label">é›£åº¦</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">12+</div>
                        <div class="stat-label">é©åˆå¹´é½¡</div>
                    </div>
                </div>
                <button class="play-button locked">ğŸ”’ éœ€å®ŒæˆLevel 2</button>
            </div>

            <!-- Level 4 - å°ˆå®¶ -->
            <div class="level-card locked" onclick="startLevel(4)">
                <div class="level-header">
                    <div class="level-emoji">ğŸ†</div>
                    <div class="level-info">
                        <h3>Level 4</h3>
                        <span class="level-difficulty difficulty-expert">å°ˆå®¶ç´š</span>
                    </div>
                </div>
                <div class="level-description">
                    çµ‚æ¥µé‚è¼¯æŒ‘æˆ°ï¼çµ„åˆå¤šç¨®è¦å¾‹ï¼Œè§£æ±ºæœ€è¤‡é›œçš„æ¨¡å¼è­˜åˆ¥å•é¡Œã€‚
                </div>
                <div class="level-features">
                    <span class="feature-tag">ğŸŒŸ çµ„åˆé‚è¼¯</span>
                    <span class="feature-tag">ğŸ”¥ æ¥µé™æŒ‘æˆ°</span>
                    <span class="feature-tag">ğŸ‘‘ å¤§å¸«èªè­‰</span>
                </div>
                <div class="level-stats">
                    <div class="stat-item">
                        <div class="stat-number">20</div>
                        <div class="stat-label">é¡Œç›®æ•¸</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">â­â­â­â­</div>
                        <div class="stat-label">é›£åº¦</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">15+</div>
                        <div class="stat-label">é©åˆå¹´é½¡</div>
                    </div>
                </div>
                <button class="play-button locked">ğŸ”’ éœ€å®ŒæˆLevel 3</button>
            </div>
        </div>

        <div class="progress-section">
            <h3>ğŸ¯ ä½ çš„æ¢éšªé€²åº¦</h3>
            <div class="overall-progress">
                <div class="progress-item">
                    <div class="progress-number">0</div>
                    <div class="progress-label">å·²å®Œæˆé—œå¡</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number">0</div>
                    <div class="progress-label">ç¸½ç­”å°é¡Œæ•¸</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number">0%</div>
                    <div class="progress-label">æ•´é«”æ­£ç¢ºç‡</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number">ğŸ”°</div>
                    <div class="progress-label">ç•¶å‰ç­‰ç´š</div>
                </div>
            </div>
        </div>

        <a href="index.html" class="back-button">â¬…ï¸ å›åˆ°éŠæˆ²ä¸»é </a>
    </div>

    <script>
        // éŠæˆ²é€²åº¦ç®¡ç†
        let gameProgress = {
            completedLevels: [],
            totalCorrect: 0,
            totalQuestions: 0,
            unlockedLevels: [1] // é è¨­è§£é–Level 1
        };

        // å¾localStorageè¼‰å…¥é€²åº¦
        function loadProgress() {
            const saved = localStorage.getItem('logicPuzzleProgress');
            if (saved) {
                gameProgress = JSON.parse(saved);
                updateProgressDisplay();
                updateLevelLocks();
            }
        }

        // å„²å­˜é€²åº¦åˆ°localStorage
        function saveProgress() {
            localStorage.setItem('logicPuzzleProgress', JSON.stringify(gameProgress));
        }

        // æ›´æ–°é€²åº¦é¡¯ç¤º
        function updateProgressDisplay() {
            const progressItems = document.querySelectorAll('.progress-number');
            progressItems[0].textContent = gameProgress.completedLevels.length;
            progressItems[1].textContent = gameProgress.totalCorrect;
            
            const accuracy = gameProgress.totalQuestions > 0 ? 
                Math.round((gameProgress.totalCorrect / gameProgress.totalQuestions) * 100) : 0;
            progressItems[2].textContent = `${accuracy}%`;
            
            // æ›´æ–°ç­‰ç´šå¾½ç« 
            const level = gameProgress.completedLevels.length;
            const badges = ['ğŸ”°', 'ğŸ¥‰', 'ğŸ¥ˆ', 'ğŸ¥‡', 'ğŸ‘‘'];
            progressItems[3].textContent = badges[Math.min(level, badges.length - 1)];
        }

        // æ›´æ–°é—œå¡é–å®šç‹€æ…‹
        function updateLevelLocks() {
            const levelCards = document.querySelectorAll('.level-card');
            const playButtons = document.querySelectorAll('.play-button');
            
            levelCards.forEach((card, index) => {
                const levelNum = index + 1;
                if (gameProgress.unlockedLevels.includes(levelNum)) {
                    card.classList.remove('locked');
                    card.classList.add('available');
                    playButtons[index].classList.remove('locked');
                    playButtons[index].textContent = 'ğŸš€ é–‹å§‹æ¢éšª';
                } else {
                    card.classList.add('locked');
                    card.classList.remove('available');
                    playButtons[index].classList.add('locked');
                    playButtons[index].textContent = `ğŸ”’ éœ€å®ŒæˆLevel ${levelNum - 1}`;
                }
            });
        }

        // é–‹å§‹æŒ‡å®šé—œå¡
        function startLevel(levelNum) {
            if (gameProgress.unlockedLevels.includes(levelNum)) {
                // è¨˜éŒ„é–‹å§‹æ™‚é–“ç­‰çµ±è¨ˆ
                window.location.href = `logic_puzzle_level_${levelNum}.html`;
            } else {
                // é¡¯ç¤ºæç¤ºè¨Šæ¯
                alert(`è«‹å…ˆå®ŒæˆLevel ${levelNum - 1}æ‰èƒ½è§£é–æ­¤é—œå¡ï¼`);
            }
        }

        // å®Œæˆé—œå¡æ™‚çš„å›èª¿å‡½æ•¸
        function completeLevel(levelNum, score, total) {
            if (!gameProgress.completedLevels.includes(levelNum)) {
                gameProgress.completedLevels.push(levelNum);
                
                // è§£é–ä¸‹ä¸€é—œ
                if (levelNum < 4 && !gameProgress.unlockedLevels.includes(levelNum + 1)) {
                    gameProgress.unlockedLevels.push(levelNum + 1);
                    
                    // æ’­æ”¾è§£é–å‹•ç•«
                    setTimeout(() => {
                        const nextCard = document.querySelectorAll('.level-card')[levelNum];
                        if (nextCard) {
                            nextCard.classList.add('unlocking');
                            setTimeout(() => {
                                nextCard.classList.remove('unlocking');
                                updateLevelLocks();
                            }, 1000);
                        }
                    }, 500);
                }
            }
            
            gameProgress.totalCorrect += score;
            gameProgress.totalQuestions += total;
            saveProgress();
            updateProgressDisplay();
        }

        // é‡ç½®é€²åº¦ï¼ˆé–‹ç™¼æ¸¬è©¦ç”¨ï¼‰
        function resetProgress() {
            if (confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰é€²åº¦å—ï¼Ÿ')) {
                localStorage.removeItem('logicPuzzleProgress');
                gameProgress = {
                    completedLevels: [],
                    totalCorrect: 0,
                    totalQuestions: 0,
                    unlockedLevels: [1]
                };
                updateProgressDisplay();
                updateLevelLocks();
            }
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            
            // æª¢æŸ¥æ˜¯å¦å¾éŠæˆ²é é¢è¿”å›ä¸¦å¸¶æœ‰æˆç¸¾
            const urlParams = new URLSearchParams(window.location.search);
            const level = urlParams.get('completed');
            const score = urlParams.get('score');
            const total = urlParams.get('total');
            
            if (level && score && total) {
                completeLevel(parseInt(level), parseInt(score), parseInt(total));
            }
        });

        // æ·»åŠ éµç›¤å¿«é€Ÿéµ
        document.addEventListener('keydown', function(e) {
            if (e.key >= '1' && e.key <= '4') {
                const levelNum = parseInt(e.key);
                startLevel(levelNum);
            }
            
            // é–‹ç™¼æ¸¬è©¦å¿«é€Ÿéµ
            if (e.ctrlKey && e.key === 'r') {
                e.preventDefault();
                resetProgress();
            }
        });
    </script>
</body>
</html>
